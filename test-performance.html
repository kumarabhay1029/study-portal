<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Test - Study Portal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .login-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .btn-icon {
            font-size: 1.2em;
        }
        .test-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .console-output {
            background: #2d2d2d;
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Login System Performance Test</h1>
        
        <div class="test-info">
            <h3>‚úÖ Lightweight Performance Mode Active</h3>
            <p>This version uses optimized scripts that won't cause site responsiveness issues.</p>
        </div>
        
        <h3>Login Button Test:</h3>
        <button class="login-btn" onclick="testLogin()">
            <span class="btn-icon" data-icon="login">üóùÔ∏è</span>
            <span class="btn-text">Login</span>
        </button>
        
        <h3>Performance Metrics:</h3>
        <div id="performance-info">
            <p>Page Load Time: <span id="load-time">Calculating...</span></p>
            <p>Script Load Time: <span id="script-time">Calculating...</span></p>
            <p>Memory Usage: <span id="memory-usage">Checking...</span></p>
        </div>
        
        <h3>Console Output:</h3>
        <div class="console-output" id="console-output">
            Loading...
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="runPerformanceTest()">üöÄ Run Performance Test</button>
            <button onclick="testIconFix()">üîß Test Icon Fix</button>
            <button onclick="clearConsole()">üßπ Clear Console</button>
        </div>
    </div>

    <script>
        const startTime = performance.now();
        let consoleOutput = [];
        
        // Capture console logs
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleOutput.push(args.join(' '));
            updateConsoleDisplay();
        };
        
        function updateConsoleDisplay() {
            const output = document.getElementById('console-output');
            output.innerHTML = consoleOutput.slice(-10).join('<br>');
            output.scrollTop = output.scrollHeight;
        }
        
        function testLogin() {
            console.log('üîê Test login button clicked');
            const btn = document.querySelector('.login-btn');
            const icon = btn.querySelector('.btn-icon');
            console.log('Current icon:', icon.textContent);
        }
        
        function testIconFix() {
            console.log('üîß Testing icon fix...');
            const btn = document.querySelector('.login-btn');
            const icon = btn.querySelector('.btn-icon');
            
            // Simulate corruption
            icon.textContent = '‚óä';
            console.log('Icon corrupted to: ‚óä');
            
            // Fix it
            setTimeout(() => {
                icon.textContent = 'üóùÔ∏è';
                console.log('Icon fixed to: üóùÔ∏è');
            }, 1000);
        }
        
        function runPerformanceTest() {
            console.log('üöÄ Running performance test...');
            
            const start = performance.now();
            
            // Test rapid DOM queries
            for (let i = 0; i < 1000; i++) {
                document.querySelector('.login-btn');
            }
            
            const queryTime = performance.now() - start;
            console.log(`1000 DOM queries took: ${queryTime.toFixed(2)}ms`);
            
            // Test memory if available
            if (performance.memory) {
                const memory = performance.memory;
                document.getElementById('memory-usage').textContent = 
                    `${(memory.usedJSHeapSize / 1024 / 1024).toFixed(2)} MB`;
            }
        }
        
        function clearConsole() {
            consoleOutput = [];
            updateConsoleDisplay();
        }
        
        // Calculate load times
        window.addEventListener('load', () => {
            const loadTime = performance.now() - startTime;
            document.getElementById('load-time').textContent = `${loadTime.toFixed(2)}ms`;
            
            setTimeout(() => {
                document.getElementById('script-time').textContent = `${(performance.now() - startTime).toFixed(2)}ms`;
            }, 100);
        });
        
        console.log('üß™ Performance test page loaded');
    </script>
</body>
</html>
