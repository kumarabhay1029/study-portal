<!DOCTYPE html>
<html>
<head>
    <title>Simple Firebase Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; }
        .status { padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ðŸ”¥ Simple Firebase Connection Test</h1>
    <p>This will test if Firebase can connect from GitHub Pages.</p>
    
    <div id="status"></div>
    
    <h2>Manual Test:</h2>
    <button onclick="testConnection()">Test Firebase Connection</button>
    <button onclick="testAuth()">Test Auth Setup</button>
    
    <h2>Instructions:</h2>
    <div class="info">
        <strong>If you see "API Key Error":</strong><br>
        1. Go to <a href="https://console.firebase.google.com/" target="_blank">Firebase Console</a><br>
        2. Select project: <code>kkgithub-e28e9</code><br>
        3. Go to Authentication > Settings<br>
        4. Add <code>kumarabhay1029.github.io</code> to Authorized domains<br>
        5. Make sure Email/Password is enabled in Sign-in method tab
    </div>

    <!-- Load Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth-compat.js"></script>

    <script>
        function addStatus(message, type) {
            const status = document.getElementById('status');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            status.appendChild(div);
        }

        function testConnection() {
            addStatus('Testing Firebase connection...', 'info');
            
            const firebaseConfig = {
                apiKey: "AIzaSyAMOoKFc6PeWoCaEa0-iZ1o2xer3capkyQ",
                authDomain: "f1site-b35c6.firebaseapp.com",
                projectId: "f1site-b35c6",
                storageBucket: "f1site-b35c6.firebasestorage.app",
                messagingSenderId: "1077434047400",
                appId: "1:1077434047400:web:0e30d9b02540355a4b1b9d"
            };

            try {
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                addStatus('âœ… Firebase initialized successfully with NEW project!', 'success');
                addStatus(`ðŸ“ Current domain: ${window.location.hostname}`, 'info');
                addStatus(`ðŸ”¥ Project: ${firebaseConfig.projectId}`, 'info');
                return true;
            } catch (error) {
                addStatus(`âŒ Firebase error: ${error.message}`, 'error');
                
                if (error.message.includes('api-key-not-valid')) {
                    addStatus(`ðŸ”§ SOLUTION: Add "${window.location.hostname}" to Firebase Authorized domains`, 'error');
                }
                return false;
            }
        }

        function testAuth() {
            addStatus('Testing Firebase Auth...', 'info');
            
            try {
                const auth = firebase.auth();
                addStatus('âœ… Firebase Auth object created!', 'success');
                
                auth.onAuthStateChanged(function(user) {
                    if (user) {
                        addStatus('âœ… User is signed in', 'success');
                    } else {
                        addStatus('â„¹ï¸ No user signed in (this is normal)', 'info');
                    }
                });
                
                // Test a simple auth operation
                auth.signInAnonymously().then(() => {
                    addStatus('âœ… Anonymous auth test successful!', 'success');
                    addStatus('ðŸŽ‰ Firebase is working perfectly!', 'success');
                }).catch((error) => {
                    if (error.code === 'auth/operation-not-allowed') {
                        addStatus('â„¹ï¸ Anonymous auth not enabled (this is OK)', 'info');
                        addStatus('âœ… Firebase Auth is working!', 'success');
                    } else {
                        addStatus(`âŒ Auth test error: ${error.message}`, 'error');
                    }
                });
                
            } catch (error) {
                addStatus(`âŒ Auth setup error: ${error.message}`, 'error');
            }
        }

        // Auto-test when page loads
        window.addEventListener('load', function() {
            setTimeout(() => {
                addStatus('ðŸš€ Starting automatic tests...', 'info');
                if (testConnection()) {
                    setTimeout(testAuth, 1000);
                }
            }, 1000);
        });
    </script>
</body>
</html>
